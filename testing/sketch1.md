Вы задали неодноздачный вопрос.
Исходите из того, какая сигнатура требуется системе "для обычной работы".

Если ваш Billing предполагает, что в нормальном режиме (рабочем коде его использования) can_show иногда будет вызываться с указанием даты - отлично!
Так и поступайте!

Публичный интерфейс класса должен выглядеть максимально удобно для пользователя.

Если для тестирования требуются хитрости - это заботы тестирования.
Как я написал чуть выше - запомнить datetime.now (функцию, а не возвращаемое значение) как атрибут класса.
Пользователь ничего не заметит и тестирующий код писать станет легче.

И не следует указывать в параметрах по умолчанию те, которые нужны только для юниттестов.

Возьмем ваш же пример. Если Billing.can_show всегда в пользовательском коде вызывается без параметров - не нужно добавлять их только для тестирования.
Сигнатура методов - это та штука, с которой работают все программисты проекта. Чем сигнатуры проще - тем легче код сопровождать.

Мне случалось работать над проектом, в котором приличная часть параметров "по умолчанию" нужна была только для тестов.
Это очень неуютно.

Если параметр есть - значит, его кто-то использует. 
Начинаю спрашивать у программистов и аналитиков: а какой-такой бизнес-процесс требует указания даты в can_show? Никто не может ответить.

Паника усиливается: есть часть кода, о которой никто не может сказать - зачем она?
Поиском нахожу все вызовы метода в рабочем коде. Они этот параметр не используют. Тесты - да. 
Тесты вообще с кодом творят страшные вещи - им бы только отработать нормально  А тестов у нас много, тысяч надцать.
Юниттесты еще белые и пушистые, всё на виду. А функциональные да регрессионные - полный ахтунг, черт ногу сломит. А то и башку расшибет.
Может, я плохо искал? Питон ведь очень динамический язык!

В отчаянии обращаюсь к начальнику отдела. Он морщит лоб и устраивает короткое совещание еще с тремя начальниками. 
Эти достойные люди не могут понять, в чем дело. 
Затем одного осеняет - да! Это мы сделали так, чтобы тесты писать было легче! А потом напрочь забыли.

Решение вылилось в довольно много человекочасов (моих и сотрудников).
А всё потому, что при разработке думали об удобстве автоматического тестирования, забыв главное правило - программа создается для конечного пользователя.

Ух, как много написал. Хоть еще одну статейку выкладывай




Ветка - http://python.su/forum/viewtopic.php?pid=66167
