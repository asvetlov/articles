Title: Метаклассы в Python 3
Labels: python, metaprogramming, python3

Лет семь назад писать о метаклассах и дескрипторах было модно и
современно.  Сейчас — совсем наоборот. Самое мягкое определение,
которое приходит в голову — «Капитан Очевидность».

И тем не менее я попробую. Дело в том, что в третьем питоне метаклассы
отличаются на самую малость — но это незаметное на первый взгляд
отличие способно довольно сильно поменять правила игры.

*Предполагается, что читатель уже знает, как работают эти самые
дескрипторы и метаклассы (хотя бы в общих чертах). Пересказывать
букварь нет никакого желания.*

Новые метаклассы описаны в [PEP
3115](http://www.python.org/dev/peps/pep-3115/).

Помимо мелких косметических изменений (метакласс указывается как
именованный параметр после списка базовых классов, дополнительные
именованные параметры для метакласса можно указать там же) добавился
метод `__prepare__`.

Он возвращает *dict-like* объект, который будет использоваться как
*namespace* для заполнения атрибутов класса.

И этот самый объект будет передан в `__new__` и `__init__` как
четвёртый параметр `dict`.

Для примера возьмём очень распространённую задачу: описание модели с её полями.
Это может быть схема таблицы базы данных, структура веб формы и так далее.
